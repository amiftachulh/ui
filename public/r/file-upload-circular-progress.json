{
  "name": "file-upload-circular-progress",
  "type": "registry:example",
  "registryDependencies": [
    "file-upload"
  ],
  "files": [
    {
      "path": "registry/default/examples/file-upload-circular-progress.tsx",
      "type": "registry:example",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { LuUpload, LuX } from \"react-icons/lu\";\nimport { toast } from \"sonner\";\nimport { css } from \"styled-system/css\";\nimport { styled } from \"styled-system/jsx\";\nimport { Button } from \"@/registry/default/ui/button\";\nimport {\n  FileUpload,\n  FileUploadDropzone,\n  FileUploadItem,\n  FileUploadItemDelete,\n  FileUploadItemMetadata,\n  FileUploadItemPreview,\n  FileUploadItemProgress,\n  FileUploadList,\n  FileUploadTrigger,\n} from \"@/registry/default/ui/file-upload\";\n\nexport default function FileUploadCircularProgress() {\n  const [files, setFiles] = React.useState<File[]>([]);\n\n  const onUpload = React.useCallback(\n    async (\n      files: File[],\n      {\n        onProgress,\n        onSuccess,\n        onError,\n      }: {\n        onProgress: (file: File, progress: number) => void;\n        onSuccess: (file: File) => void;\n        onError: (file: File, error: Error) => void;\n      }\n    ) => {\n      try {\n        // Process each file individually\n        const uploadPromises = files.map(async (file) => {\n          try {\n            // Simulate file upload with progress\n            const totalChunks = 10;\n            let uploadedChunks = 0;\n\n            // Simulate chunk upload with delays\n            for (let i = 0; i < totalChunks; i++) {\n              // Simulate network delay (100-300ms per chunk)\n              await new Promise((resolve) => setTimeout(resolve, Math.random() * 200 + 100));\n\n              // Update progress for this specific file\n              uploadedChunks++;\n              const progress = (uploadedChunks / totalChunks) * 100;\n              onProgress(file, progress);\n            }\n\n            // Simulate server processing delay\n            await new Promise((resolve) => setTimeout(resolve, 500));\n            onSuccess(file);\n          } catch (error) {\n            onError(file, error instanceof Error ? error : new Error(\"Upload failed\"));\n          }\n        });\n\n        // Wait for all uploads to complete\n        await Promise.all(uploadPromises);\n      } catch (error) {\n        // This handles any error that might occur outside the individual upload processes\n        console.error(\"Unexpected error during upload:\", error);\n      }\n    },\n    []\n  );\n\n  const onFileReject = React.useCallback((file: File, message: string) => {\n    toast(message, {\n      description: `\"${file.name.length > 20 ? `${file.name.slice(0, 20)}...` : file.name}\" has been rejected`,\n    });\n  }, []);\n\n  return (\n    <FileUpload\n      value={files}\n      onValueChange={setFiles}\n      maxFiles={10}\n      maxSize={5 * 1024 * 1024}\n      css={{ w: \"full\", maxW: \"md\" }}\n      onUpload={onUpload}\n      onFileReject={onFileReject}\n      multiple\n    >\n      <FileUploadDropzone>\n        <styled.div\n          css={{\n            display: \"flex\",\n            flexDir: \"column\",\n            alignItems: \"center\",\n            gap: \"1\",\n            textAlign: \"center\",\n          }}\n        >\n          <styled.div\n            css={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              rounded: \"full\",\n              borderWidth: \"1px\",\n              p: \"2.5\",\n            }}\n          >\n            <LuUpload className={css({ w: \"6\", h: \"6\", color: \"muted.fg\" })} />\n          </styled.div>\n          <styled.p css={{ fontWeight: \"medium\", textStyle: \"sm\" }}>\n            Drag & drop files here\n          </styled.p>\n          <styled.p css={{ color: \"muted.fg\", textStyle: \"xs\" }}>\n            Or click to browse (max 10 files, up to 5MB each)\n          </styled.p>\n        </styled.div>\n        <FileUploadTrigger asChild>\n          <Button variant=\"outline\" size=\"sm\" css={{ mt: \"2\", w: \"fit\" }}>\n            Browse files\n          </Button>\n        </FileUploadTrigger>\n      </FileUploadDropzone>\n      <FileUploadList orientation=\"horizontal\">\n        {files.map((file, index) => (\n          <FileUploadItem key={index} value={file} css={{ p: \"0\" }}>\n            <FileUploadItemPreview\n              css={{\n                w: \"20\",\n                h: \"20\",\n                \"& > svg\": {\n                  w: \"12\",\n                  h: \"12\",\n                },\n              }}\n            >\n              <FileUploadItemProgress variant=\"circular\" size={40} />\n            </FileUploadItemPreview>\n            <FileUploadItemMetadata css={{ srOnly: true }} />\n            <FileUploadItemDelete asChild>\n              <Button\n                variant=\"secondary\"\n                size=\"icon\"\n                css={{ pos: \"absolute\", top: \"-1\", right: \"-1\", w: \"5\", h: \"5\", rounded: \"full\" }}\n              >\n                <LuX className={css({ w: \"3\", h: \"3\" })} />\n              </Button>\n            </FileUploadItemDelete>\n          </FileUploadItem>\n        ))}\n      </FileUploadList>\n    </FileUpload>\n  );\n}\n"
    }
  ]
}