{
  "name": "form-tanstack-checkbox",
  "type": "registry:example",
  "dependencies": [
    "@tanstack/react-form",
    "zod"
  ],
  "registryDependencies": [
    "field",
    "checkbox",
    "button",
    "card"
  ],
  "files": [
    {
      "path": "registry/default/examples/form-tanstack-checkbox.tsx",
      "type": "registry:example",
      "content": "/* eslint-disable react/no-children-prop */\n\"use client\";\n\nimport { useForm } from \"@tanstack/react-form\";\nimport { toast } from \"sonner\";\nimport { styled } from \"styled-system/jsx\";\nimport * as z from \"zod\";\nimport { Button } from \"@/registry/default/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/registry/default/ui/card\";\nimport { Checkbox } from \"@/registry/default/ui/checkbox\";\nimport {\n  Field,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLabel,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n} from \"@/registry/default/ui/field\";\n\nconst tasks = [\n  {\n    id: \"push\",\n    label: \"Push notifications\",\n  },\n  {\n    id: \"email\",\n    label: \"Email notifications\",\n  },\n] as const;\n\nconst formSchema = z.object({\n  responses: z.boolean(),\n  tasks: z\n    .array(z.string())\n    .min(1, \"Please select at least one notification type.\")\n    .refine((value) => value.every((task) => tasks.some((t) => t.id === task)), {\n      message: \"Invalid notification type selected.\",\n    }),\n});\n\nexport default function FormTanstackCheckbox() {\n  const form = useForm({\n    defaultValues: {\n      responses: true,\n      tasks: [] as string[],\n    },\n    validators: {\n      onSubmit: formSchema,\n    },\n    onSubmit: async ({ value }) => {\n      toast(\"You submitted the following values:\", {\n        description: (\n          <styled.pre\n            css={{\n              mt: \"2\",\n              w: \"320px\",\n              overflowX: \"auto\",\n              rounded: \"md\",\n              bg: \"slate.950\",\n              p: \"4\",\n              borderWidth: \"1px\",\n            }}\n          >\n            <code>{JSON.stringify(value, null, 2)}</code>\n          </styled.pre>\n        ),\n      });\n    },\n  });\n\n  return (\n    <Card css={{ w: \"full\", sm: { maxW: \"md\" } }}>\n      <CardHeader>\n        <CardTitle>Notifications</CardTitle>\n        <CardDescription>Manage your notification preferences.</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form\n          id=\"form-tanstack-checkbox\"\n          onSubmit={(e) => {\n            e.preventDefault();\n            form.handleSubmit();\n          }}\n        >\n          <FieldGroup>\n            <form.Field\n              name=\"responses\"\n              children={(field) => {\n                const isInvalid = field.state.meta.isTouched && !field.state.meta.isValid;\n                return (\n                  <FieldSet>\n                    <FieldLegend variant=\"label\">Responses</FieldLegend>\n                    <FieldDescription>\n                      Get notified for requests that take time, like research or image generation.\n                    </FieldDescription>\n                    <FieldGroup data-slot=\"checkbox-group\">\n                      <Field orientation=\"horizontal\" data-invalid={isInvalid}>\n                        <Checkbox\n                          id=\"form-tanstack-checkbox-responses\"\n                          name={field.name}\n                          checked={field.state.value}\n                          onCheckedChange={(checked) => field.handleChange(checked === true)}\n                          disabled\n                        />\n                        <FieldLabel\n                          htmlFor=\"form-tanstack-checkbox-responses\"\n                          css={{ fontWeight: \"normal\" }}\n                        >\n                          Push notifications\n                        </FieldLabel>\n                      </Field>\n                    </FieldGroup>\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\n                  </FieldSet>\n                );\n              }}\n            />\n            <FieldSeparator />\n            <form.Field\n              name=\"tasks\"\n              mode=\"array\"\n              children={(field) => {\n                const isInvalid = field.state.meta.isTouched && !field.state.meta.isValid;\n                return (\n                  <FieldSet>\n                    <FieldLegend variant=\"label\">Tasks</FieldLegend>\n                    <FieldDescription>\n                      Get notified when tasks you&apos;ve created have updates.\n                    </FieldDescription>\n                    <FieldGroup data-slot=\"checkbox-group\">\n                      {tasks.map((task) => (\n                        <Field key={task.id} orientation=\"horizontal\" data-invalid={isInvalid}>\n                          <Checkbox\n                            id={`form-tanstack-checkbox-${task.id}`}\n                            name={field.name}\n                            aria-invalid={isInvalid}\n                            checked={field.state.value.includes(task.id)}\n                            onCheckedChange={(checked) => {\n                              if (checked) {\n                                field.pushValue(task.id);\n                              } else {\n                                const index = field.state.value.indexOf(task.id);\n                                if (index > -1) {\n                                  field.removeValue(index);\n                                }\n                              }\n                            }}\n                          />\n                          <FieldLabel\n                            htmlFor={`form-tanstack-checkbox-${task.id}`}\n                            css={{ fontWeight: \"normal\" }}\n                          >\n                            {task.label}\n                          </FieldLabel>\n                        </Field>\n                      ))}\n                    </FieldGroup>\n                    {isInvalid && <FieldError errors={field.state.meta.errors} />}\n                  </FieldSet>\n                );\n              }}\n            />\n          </FieldGroup>\n        </form>\n      </CardContent>\n      <CardFooter>\n        <Field orientation=\"horizontal\">\n          <Button type=\"button\" variant=\"outline\" onClick={() => form.reset()}>\n            Reset\n          </Button>\n          <Button type=\"submit\" form=\"form-tanstack-checkbox\">\n            Save\n          </Button>\n        </Field>\n      </CardFooter>\n    </Card>\n  );\n}\n"
    }
  ]
}